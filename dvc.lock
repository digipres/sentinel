schema: '2.0'
stages:
  transform-format-data:
    cmd:
    - python -m foreging.pronom > pronom.jsonl
    - python -m foreging.loc_fdd > loc.jsonl
    - python -m foreging.nara > nara.jsonl
    deps:
    - path: digipres.github.io/_sources/registries
      hash: md5
      md5: 19b255a97dce0ce49a396d4c7ddcdaa8.dir
      size: 216499227
      nfiles: 27072
    - path: foreging
      hash: md5
      md5: 85ed7928fc1ba6db8855fa23adbe8e4a.dir
      size: 32957
      nfiles: 12
    outs:
    - path: loc.jsonl
      hash: md5
      md5: 380914567a5637ad1a6c075403b1db89
      size: 503541
    - path: nara.jsonl
      hash: md5
      md5: 9e00363e4dfdd006d597aeb9bf7cdeab
      size: 1257013
    - path: pronom.jsonl
      hash: md5
      md5: a1e49e58d2be69a27ad2e5f75203e37a
      size: 2376855
  generate-sqlite:
    cmd:
    - sqlite-utils insert registries.db formats --nl loc.jsonl
    - sqlite-utils insert registries.db formats --nl pronom.jsonl
    - sqlite-utils insert registries.db formats --nl nara.jsonl
    - sqlite-utils enable-fts registries.db formats name summary extensions iana_media_types
      genres
    deps:
    - path: loc.jsonl
      hash: md5
      md5: 380914567a5637ad1a6c075403b1db89
      size: 503541
    - path: nara.jsonl
      hash: md5
      md5: 9e00363e4dfdd006d597aeb9bf7cdeab
      size: 1257013
    - path: pronom.jsonl
      hash: md5
      md5: a1e49e58d2be69a27ad2e5f75203e37a
      size: 2376855
    outs:
    - path: registries.db
      hash: md5
      md5: 81d65d6f0e722015f8cbf8c8828b069f
      size: 4759552
