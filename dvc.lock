schema: '2.0'
stages:
  transform-format-data:
    cmd:
    - python -m foreging.pronom > pronom.jsonl
    - python -m foreging.loc_fdd > loc.jsonl
    deps:
    - path: digipres.github.io/_sources/registries
      hash: md5
      md5: 6f3d9b2b5ba1f6fdc7a123e86579852d.dir
      size: 211853546
      nfiles: 26983
    - path: foreging
      hash: md5
      md5: 3d4810f7fa7c96d09297bf43a15acd0d.dir
      size: 22575
      nfiles: 9
    outs:
    - path: loc.jsonl
      hash: md5
      md5: 380914567a5637ad1a6c075403b1db89
      size: 503541
    - path: pronom.jsonl
      hash: md5
      md5: ee8fe400d5fbf6b405b39e77e7b713b8
      size: 2372708
  generate-sqlite:
    cmd:
    - sqlite-utils insert registries.db formats --nl loc.jsonl
    - sqlite-utils insert registries.db formats --nl pronom.jsonl
    - sqlite-utils enable-fts registries.db formats name summary extensions iana_media_types
      genres
    deps:
    - path: loc.jsonl
      hash: md5
      md5: 380914567a5637ad1a6c075403b1db89
      size: 503541
    - path: pronom.jsonl
      hash: md5
      md5: ee8fe400d5fbf6b405b39e77e7b713b8
      size: 2372708
    outs:
    - path: registries.db
      hash: md5
      md5: 479eb87b8af1d3208b57f59137f6719b
      size: 3182592
