schema: '2.0'
stages:
  transform-format-data:
    cmd:
    - python -m foreging.pronom > pronom.jsonl
    - python -m foreging.loc_fdd > loc.jsonl
    - python -m foreging.nara > nara.jsonl
    deps:
    - path: digipres.github.io/_sources/registries
      hash: md5
      md5: 2fbddb654293f1999c201be2db60b393.dir
      size: 219597556
      nfiles: 27236
    - path: foreging
      hash: md5
      md5: 9f5a3d0919d80673cab7b5352513b3bb.dir
      size: 33535
      nfiles: 12
    outs:
    - path: loc.jsonl
      hash: md5
      md5: 40f36b114a5d92d33b2766acddf2d11f
      size: 513352
    - path: nara.jsonl
      hash: md5
      md5: b7e77b685e0514e37bc16cefdc187db1
      size: 1267948
    - path: pronom.jsonl
      hash: md5
      md5: 780f7bf1add431a306d7e8874e97be33
      size: 2416106
  generate-sqlite:
    cmd:
    - sqlite-utils insert registries.db formats --nl loc.jsonl
    - sqlite-utils insert registries.db formats --nl pronom.jsonl
    - sqlite-utils insert registries.db formats --nl nara.jsonl
    - sqlite-utils enable-fts registries.db formats name summary extensions iana_media_types
      genres
    deps:
    - path: loc.jsonl
      hash: md5
      md5: 40f36b114a5d92d33b2766acddf2d11f
      size: 513352
    - path: nara.jsonl
      hash: md5
      md5: b7e77b685e0514e37bc16cefdc187db1
      size: 1267948
    - path: pronom.jsonl
      hash: md5
      md5: 780f7bf1add431a306d7e8874e97be33
      size: 2416106
    outs:
    - path: registries.db
      hash: md5
      md5: b07a80e8ad84f0f007d08e1ae7cb3ac4
      size: 4767744
